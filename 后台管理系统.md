# 后台管理系统

## 一.准备工作

### 技术栈

* vue.js
* Vue Router
  * 管理路由
* Vue CLI
  * 快速创建项目
* Vuex
  * 管理共享的数据状态
* axios
  * 请求库
* Element
  * 第三方组件库
* Echarts
  * 数据图形库
* 其他第三方插件

### 准备工作

#### 认识目录结构

![image-20210108152058275](C:\Users\yang\AppData\Roaming\Typora\typora-user-images\image-20210108152058275.png)

认识完之后就是调整结构

- 删除初始化的默认文件
- 新增调整我们需要的目录结构

工作如下:

1. 删除默认生成的不相关文件：

- src/views/About.vue
- src/views/Home.vue
- src/components/HelloWorld.vue
- src/assets/logo.png



2. 增加以下几个目录

- src/api 目录
  - 存储接口模块
- src/utils 目录
  - 存储一些工具模块
- src/styles 目录
  - index.less 文件，设置全局样式
  - 在 `main.js` 中加载全局样式 `import './styles/index.less'`

调整后的结构目录:

```
.                                 
├── README.md                     
├── babel.config.js               
├── package-lock.json             
├── package.json                  
├── public                        
│   ├── favicon.ico               
│   └── index.html                
└── src                           
    ├── api
    ├── App.vue                   
    ├── assets                    
    ├── components                
    ├── main.js                   
    ├── router
    ├── store
    ├── utils
    ├── styles               
    └── views
```

### JavaScript 代码规范

#### 什么是编码规范

#### 如何统一编码规范

ESLint。

#### 流行的编码规范

- Airbnb JavaScript Style
  - 非常严谨，规则特别多

- JavaScript Standard Style
  - 相比 Airbnb JavaScript Style 要宽松一些。

我们项目中使用的是 [JavaScript Standard Style](https://standardjs.com/readme-zhcn.html) 代码风格。下面是它的一些具体规则要求：

#### JavaScript Standard Style 规范说明

建议把：https://standardjs.com/rules-zhcn.html 看一遍，然后在写的时候遇到错误就查询解决。

- **使用两个空格** – 进行缩进

- **字符串使用单引号** – 需要转义的地方除外

- **不再有冗余的变量** – 这是导致 _大量_ bug 的源头!

- **无分号** – [这](http://blog.izs.me/post/2353458699/an-open-letter-to-javascript-leaders-regarding)[没什么不好。](http://inimino.org/~inimino/blog/javascript_semicolons)[不骗你！](https://www.youtube.com/watch?v=gsfbh17Ax9I)

- 行首不要以 `(`, `[`, or ``` 开头

  - 这是省略分号时**唯一**会造成问题的地方 – _工具里已加了自动检测！_
  - [详情](https://standardjs.com/rules-zhcn.html#semicolons)

- **关键字后加空格** `if (condition) { ... }`

- **函数名后加空格** `function name (arg) { ... }`

- 坚持使用全等 `===` 摒弃 `==` 一但在需要检查 `null || undefined` 时可以使用 `obj == null`。

- 一定要处理 Node.js 中错误回调传递进来的 `err` 参数。

- 使用浏览器全局变量时加上 `window` 前缀

  - document 和 navigator 除外

  - 避免无意中使用到了这些命名看上去很普通的全局变量， `open`, `length`, `event` 还有 `name`。

- **查看更多** – _为何不试试 standard 规范呢！_

说了那么多，看看[这个遵循了 Standard 规范的示例文件](https://github.com/expressjs/body-parser/blob/master/index.js) 中的代码吧。或者，这里还有[一大波使用了此规范的项目](https://raw.githubusercontent.com/standard/standard-packages/master/all.json) 代码可供参考。

#### 如何解决代码规范错误

<img src="D:\Desktop\课程资料\笔记\assets\image-20200420112418029.png" alt="image-20200420112418029" style="zoom:50%;" />

如果你不认识命令行中的语法报错是什么意思，你可以根据错误代号去 ESLint 规则列表中查找其具体含义。

什么是错误代号？

<img src="D:\Desktop\课程资料\笔记\assets\1561024746437.png" alt="1561024746437" style="zoom:50%;" />

> 括号中的就是错误代码。
>
> semi
>
> keyword-spacing
>
> space-before-function-paren

打开 [ESLint 规则表](https://cn.eslint.org/docs/rules/)，使用页面搜索（Ctrl + F）这个代码，查找对该规则的一个释义。

<img src="D:\Desktop\课程资料\笔记\assets\1561024887156.png" alt="1561024887156" style="zoom:50%;" />

> 例如我通过页面页面查找 `space-before-function-paren` 规则代号的释义。

#### 关于 Vue.js 代码规范

> 非强制要求，但是建议按照一定格式来写。

参考：[官方风格指南](https://cn.vuejs.org/v2/style-guide/)。

### 第三方组件库(Element 组件库)

#### Element 介绍

Element 是饿了么前端团队开发的一个基于 Vue.js 的桌面端组件库，它提供的组件非常丰富，不仅功能强大，而且简单易用。

Element 非常的流行，大多数基于 Vue.js 开发的管理系统都会使用到它。

- 官网：https://element.eleme.io/
- GitHub 仓库：https://github.com/ElemeFE/element
  - 目前已有 44.8k 的 Star 了

#### 导入到项目中

1、安装

```bash
npm i element-ui
```

2、在 `main.js` 中配置 element 组件库

```js
/**
 * 项目的启动入口
 */

import Vue from 'vue'
import App from './App.vue'
import router from './router'

// 加载 element 组件库
import ElementUI from 'element-ui'

// 加载 element 组件库的样式
import 'element-ui/lib/theme-chalk/index.css'

// 加载全局样式文件
import './styles/index.less'

// 全局注册 element 组件库
Vue.use(ElementUI)

Vue.config.productionTip = false

// 创建 Vue 根实例
// 把 router 配置到根实例中
// 通过 render 方法把 App 根组件渲染到 #app 入口节点
new Vue({
  router,
  render: h => h(App)
  // el: '#app' // 等价于 $mount('#app')
}).$mount('#app')

```

#### 使用说明

用哪个组件就看哪个组件的说明文档。

复制 -> 粘贴 

### 封装请求模块

为了方便，我们在这里把 axios 单独封装一个模块用于项目中的请求操作。

去简单了解[axios](http://www.axios-js.com/)

会用即可

```js
/**
 * 基于 axios 封装的请求模块
 */
import axios from 'axios'

// axios()
// axios.get()
// axios.post()

// 创建一个 axios 实例，说白了就是复制了一个 axios
// 我们通过这个实例去发请求，把需要的配置配置给这个实例来处理
const request = axios.create({
  baseURL: 'http://ttapi.research.itcast.cn/' // 请求的基础路径
})

// 请求拦截器

// 响应拦截器

// 导出请求方法
export default request

//用法:
// 谁要使用谁就加载 request 模块
// import request from 'request.js'
// request.xxx
// request({
//   method: ,
//   url: ''
// })

```

## 二.用户登录

### 创建组件并配置路由

router->index.js

```js
// 你写的页面添加路由
import Login from '@/views/login'
import Vue from 'vue'
import VueRouter from 'vue-router'

Vue.use(VueRouter)
// 路由配置地方
const routes = [
  {
    path: '/',
    redirect: '/login'// 重定向地址
  },
  {
    path: '/login', // 显示地址
    name: 'login',
    component: Login// 组件名称
  }
]

const router = new VueRouter({
  routes
})

export default router

```

创建好页面后,就开始创建路由,保证能显示

**注意点**:

在VueCli目录中,@表示src目录,好处:不受当前文件的影响.

### 页面布局

```html
<template>
  <div class='login-container'>
    <el-form class="login-form" ref="form" :model="user" >
      <el-form-item >
    <el-input v-model="user.mobile" placeholder="请输入手机号"></el-input>
      </el-form-item>
      <el-form-item >
    <el-input v-model="user.code" placeholder="请输入验证码"></el-input>
      </el-form-item>
      <el-form-item>
    <el-button type="primary" @click="onSubmit" class="login-button">登录</el-button>
  </el-form-item>
    </el-form>
  </div>
</template>
```

注意点:

![image-20210109103229245](C:\Users\yang\AppData\Roaming\Typora\typora-user-images\image-20210109103229245.png)



当你发现表单前面差很多,而且与你写的css不一样的话,一般是` label-width="80px" `在起作用.

#### 样式

```css
<style lang="less">
  // @import url(); 引入公共css类
  .login-container{
    position: fixed;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: url('./assets/005100-1592412660d6f4.jpg') no-repeat ;
    background-size: cover;
  }
  .login-head{
    height:122px;
    display: flex;
     justify-content: center;
    align-items: center;
  }
  .login-head img{
    height:122px;
    width:114px;
  }
  .login-form{
    background:#fff;
    padding:0 50px 10px;
    min-width: 300px;
    opacity: 0.7;
    border-radius:5px;
  }
  .login-button{
    width:100%;
  }
```

### 实现登录功能

思路：

- 给登陆按钮注册点击事件
- 获取表单数据
- 表单规则验证
- 请求登录
- 处理后端响应结果
  - 成功处理
  - 失败处理

具体看代码







